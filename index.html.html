<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generatore di Schede di Allenamento</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Oswald:wght@500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff4757;
            --secondary: #2f3542;
            --accent: #ff6b81;
            --light: #f1f2f6;
            --dark: #1e272e;
            --success: #2ed573;
            --warning: #ffa502;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--secondary), var(--dark));
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        h1, h2, h3, h4 {
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin: 0;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        h2 {
            color: var(--secondary);
            font-size: 1.8rem;
            margin-top: 30px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            display: inline-block;
        }
        
        .logo {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .form-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.2);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 14px 25px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-right: 10px;
            margin-top: 10px;
        }
        
        button:hover {
            background-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        button.secondary {
            background-color: var(--secondary);
        }
        
        button.secondary:hover {
            background-color: var(--dark);
        }
        
        #scheda {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        th {
            background-color: var(--secondary);
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:hover {
            background-color: #f1f1f1;
        }
        
        .warmup-stretching {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 30px 0;
        }
        
        ul {
            padding-left: 20px;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        .social {
            background: var(--secondary);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-top: 40px;
        }
        
        .social a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
        }
        
        .social a:hover {
            text-decoration: underline;
        }
        
        .success {
            color: var(--success);
        }
        
        .warning {
            color: var(--warning);
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #fff5f5, #ffecec);
            border-left: 4px solid var(--primary);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 6px 6px 0;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">A.S.D CENTROFITNESS</div>
            <h1>Generatore di Schede di Allenamento</h1>
            <p>Personalizza la tua scheda di allenamento per le prossime 6 settimane</p>
        </div>
    </header>

    <div class="container">
        <div class="form-container">
            <h2>Informazioni Personali</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="nome">Nome e Cognome</label>
                    <input type="text" id="nome" placeholder="Es. Mario Rossi" required>
                </div>
                
                <div class="form-group">
                    <label for="eta">Età</label>
                    <input type="number" id="eta" min="10" max="100" value="30">
                </div>
                
                <div class="form-group">
                    <label for="genere">Genere</label>
                    <select id="genere">
                        <option value="uomo">Uomo</option>
                        <option value="donna">Donna</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="peso">Peso (kg)</label>
                    <input type="number" id="peso" min="30" max="200">
                </div>
                
                <div class="form-group">
                    <label for="altezza">Altezza (cm)</label>
                    <input type="number" id="altezza" min="120" max="250">
                </div>
                
                <div class="form-group">
                    <label for="fisico">Tipo di fisico</label>
                    <select id="fisico">
                        <option value="ectomorfo">Ectomorfo</option>
                        <option value="mesomorfo">Mesomorfo</option>
                        <option value="endomorfo">Endomorfo</option>
                    </select>
                </div>
            </div>
            
            <h2>Preferenze Allenamento</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="tipologia">Tipologia di scheda</label>
                    <select id="tipologia">
                        <option value="classica">Classica</option>
                        <option value="totalbody">Total Body</option>
                        <option value="over60">Over 60</option>
                        <option value="gambe">Solo Gambe</option>
                        <option value="cardio">Solo Cardio</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="giorni">Giorni di allenamento</label>
                    <select id="giorni">
                        <option value="3">3 giorni</option>
                        <option value="4">4 giorni</option>
                        <option value="5">5 giorni</option>
                        <option value="6" selected>6 giorni</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="obiettivo">Obiettivo</label>
                    <select id="obiettivo">
                        <option value="massa">Aumento Massa</option>
                        <option value="definizione">Definizione</option>
                        <option value="forza">Forza</option>
                        <option value="dimagrimento">Dimagrimento</option>
                        <option value="cardio">Cardio</option>
                    </select>
                </div>
            </div>
            
            <div class="highlight-box">
                <p><strong>Nota:</strong> Compila tutti i campi per generare una scheda personalizzata. La scheda sarà strutturata su 6 settimane di allenamento.</p>
            </div>
            
            <button onclick="generaScheda()">Genera Scheda</button>
            <button class="secondary" onclick="scaricaPDF()">Scarica in PDF</button>
        </div>

        <div class="warmup-stretching">
            <h2>Riscaldamento Consigliato</h2>
            <ul>
                <li>5-10 minuti di cyclette o camminata veloce</li>
                <li>3 serie da 15 ripetizioni di squat a corpo libero</li>
                <li>2 serie da 20 jumping jack</li>
                <li>Rotazioni articolari (spalle, anche, polsi, caviglie) per 30 secondi ciascuna</li>
            </ul>
        </div>

        <div id="scheda"></div>

        <div class="warmup-stretching">
            <h2>Stretching Consigliato (Post-Allenamento)</h2>
            <ul>
                <li>Stretching pettorali: 30 secondi per lato</li>
                <li>Stretching quadricipiti: 30 secondi per gamba</li>
                <li>Stretching bicipiti femorali: 30 secondi per gamba</li>
                <li>Stretching schiena e spalle: 30 secondi</li>
                <li>Respirazione profonda: 1-2 minuti</li>
            </ul>
        </div>

        <div class="social">
            <h3>Contatti</h3>
            <p><strong>Francesco</strong>: <a href="https://www.instagram.com/francesco_oretti">Instagram</a> | WhatsApp: <a href="https://wa.me/393204152543">3204152543</a></p>
            <p><strong>Federico</strong>: <a href="https://www.instagram.com/federico_iacomelli">Instagram</a> | WhatsApp: <a href="https://wa.me/393895175911">3895175911</a></p>
        </div>
    </div>

    <script>
        const esercizi = {
            petto: ["Panca piana con bilanciere", "Croci su panca inclinata con manubri", "Panca declinata con bilanciere", "Chest press", "Push up", "Croci ai cavi alti", "Croci ai cavi bassi", "Croci con manubri su panca piana", "Spinte con manubri su panca inclinata", "Spinte con manubri su panca piana"],
            schiena: ["Lat machine", "Rematore con bilanciere", "Pulley basso", "Trazioni alla sbarra", "Pullover", "Low row", "Lat machine presa inversa", "Lat machine Presa neutra", "Triangolo alla lat machine", "Pulley presa larga"],
            gambe: ["Squat", "Leg press", "Affondi", "Stacchi da terra", "Leg extension", "Adductor machine", "Abductor machine", "Stacchi rumeni", "Hiptrust", "Gluteos machine", "Calf seduto", "Calf in piedi", "Hack squat"],
            spalle: ["Lento avanti", "Alzate laterali", "Alzate frontali", "Shoulder press", "Alzate a 90°", "Face pull", "Spinte Frontali su panca a 90", "Arnold Press", "Alzate oblique al cavo"],
            braccia: ["Curl con bilanciere", "Curl alternato con manubri", "French press", "Push down", "Hammer curl", "Bicipite machine", "Push down con corda", "Spider curl su panca a 30/45"],
            core: ["Crunch", "Plank", "Russian twist", "Sit-up", "Leg raise"]
        };

        const suggerimenti = {
            "Panca piana con bilanciere": "Controlla il movimento nella fase negativa.",
            "Croci su panca inclinata con manubri": "Concentrati sull'allungamento muscolare.",
            "Panca declinata con bilanciere": "Ottimo per la parte bassa del petto.",
            "Chest press": "Evita di bloccare i gomiti in alto.",
            "Push up": "Mantieni il corpo in linea.",
            "Lat machine": "Tira con i gomiti, non con le mani.",
            "Rematore con bilanciere": "Schiena sempre dritta.",
            "Pulley basso": "Evita lo slancio, concentrati sul movimento.",
            "Trazioni alla sbarra": "Mantieni il controllo in discesa.",
            "Pullover": "Respira profondamente durante l'allungamento.",
            "Squat": "Scendi almeno al parallelo.",
            "Leg press": "Non stendere mai completamente le gambe.",
            "Affondi": "Tieni il busto eretto.",
            "Stacchi da terra": "Usa una forma corretta per evitare infortuni.",
            "Leg extension": "Controlla il movimento e non usare troppo peso.",
            "Lento avanti": "Esegui l'esercizio lentamente.",
            "Alzate laterali": "Usa pesi moderati per controllare il movimento.",
            "Alzate frontali": "Non sollevare oltre le spalle.",
            "Shoulder press": "Mantieni la schiena dritta.",
            "Alzate a 90°": "Movimento lento e controllato.",
            "Curl con bilanciere": "Evita di dondolare il corpo.",
            "Curl alternato con manubri": "Concentrati sulla contrazione.",
            "French press": "Stai attento alla posizione dei gomiti.",
            "Push down": "Non alzare troppo i gomiti.",
            "Hammer curl": "Controlla la fase di discesa.",
            "Crunch": "Non forzare il collo.",
            "Plank": "Tieni il corpo allineato.",
            "Russian twist": "Non usare troppo slancio.",
            "Sit-up": "Mantieni i piedi a terra.",
            "Leg raise": "Evita di inarcare la schiena.",
            "Croci ai cavi alti": "Mantieni i gomiti leggermente flessi e stabili.",
            "Croci ai cavi bassi": "Esegui un movimento diagonale dal basso verso l'alto.",
            "Croci con manubri su panca piana": "Mantieni i gomiti leggermente flessi e fermi.",
            "Spinte con manubri su panca inclinata": "Controlla il movimento, evitando di estendere completamente i gomiti.",
            "Spinte con manubri su panca piana": "Assicurati che i polsi siano allineati con i gomiti.",
            "Low row": "Mantieni la schiena dritta e tira con i gomiti.",
            "Lat machine presa inversa": "Utilizza una presa supina per enfatizzare il lavoro sui bicipiti.",
            "Lat machine presa neutra": "Concentrati sul movimento dei gomiti verso il basso.",
            "Triangolo alla lat machine": "Mantieni il busto leggermente inclinato all'indietro.",
            "Pulley presa larga": "Evita di oscillare il corpo.",
            "Adductor machine": "Esegui il movimento lentamente.",
            "Abductor machine": "Mantieni la schiena appoggiata allo schienale.",
            "Stacchi rumeni": "Mantieni le gambe leggermente flesse e la schiena dritta.",
            "Hiptrust": "Spingi attraverso i talloni e contrai i glutei.",
            "Gluteos machine": "Controlla il movimento, evitando slanci.",
            "Calf seduto": "Esegui il movimento lentamente.",
            "Calf in piedi": "Mantieni le ginocchia leggermente flesse.",
            "Hack squat": "Mantieni la schiena appoggiata allo schienale.",
            "Alzate oblique al cavo": "Esegui il movimento lentamente.",
            "Bicipite machine": "Assicurati che i gomiti rimangano fermi.",
            "Push down con corda": "Mantieni i gomiti vicini al corpo.",
            "Spider curl su panca a 30/45": "Mantieni il petto appoggiato alla panca."
        };

        function generaScheda() {
            // Validazione input
            const nomeUtente = document.getElementById("nome").value.trim();
            if (!nomeUtente) {
                alert("Inserisci il nome e cognome");
                return;
            }

            const obiettivo = document.getElementById('obiettivo').value;
            const eta = parseInt(document.getElementById("eta").value) || 30;
            const tipologia = document.getElementById('tipologia').value;
            const giorni = parseInt(document.getElementById("giorni").value);
            
            // Gruppi muscolari selezionati in base alla tipologia
            const gruppiSelezionati = getGruppiByTipologia(tipologia);
            if (gruppiSelezionati.length === 0) return; // Per cardio
            
            // Distribuzione dei gruppi muscolari per giorno
            const gruppiPerSettimana = distribuisciGruppi(gruppiSelezionati, giorni, tipologia);

            let output = `<h2 class="success">Scheda di allenamento per ${nomeUtente}</h2>`;
            
            for (let settimana = 1; settimana <= 6; settimana++) {
                output += generaSettimana(settimana, eta, tipologia, giorni, gruppiPerSettimana, obiettivo);
            }

            document.getElementById("scheda").innerHTML = output;
        }

        // Funzioni helper
        function getGruppiByTipologia(tipologia) {
            const gruppi = Object.keys(esercizi);
            switch(tipologia) {
                case "classica": return [...gruppi];
                case "totalbody": return [...gruppi];
                case "over60": return ["gambe", "spalle", "core"];
                case "gambe": return ["gambe"];
                case "cardio": 
                    document.getElementById("scheda").innerHTML = "<h2>Programma Cardio</h2><ul><li>20 min camminata veloce</li><li>10 min salti con la corda</li><li>20 min cyclette</li><li>Stretching finale</li></ul>";
                    return [];
                default: return [...gruppi];
            }
        }

        function distribuisciGruppi(gruppiSelezionati, giorni, tipologia) {
            const gruppiPerSettimana = [];
            if (tipologia === "totalbody") {
                // Mescola i gruppi per varietà
                const shuffled = [...gruppiSelezionati].sort(() => 0.5 - Math.random());
                for (let i = 0; i < giorni; i++) {
                    const start = (i * 3) % gruppiSelezionati.length;
                    let gruppoGiorno = shuffled.slice(start, start + 3);
                    if (gruppoGiorno.length < 3) {
                        gruppoGiorno = gruppoGiorno.concat(shuffled.slice(0, 3 - gruppoGiorno.length));
                    }
                    gruppiPerSettimana.push(gruppoGiorno);
                }
            } else {
                // Distribuzione ciclica dei gruppi
                for (let i = 0; i < giorni; i++) {
                    gruppiPerSettimana.push([gruppiSelezionati[i % gruppiSelezionati.length]]);
                }
            }
            return gruppiPerSettimana;
        }

        function generaSettimana(settimana, eta, tipologia, giorni, gruppiPerSettimana, obiettivo) {
            let output = `<h2>Settimana ${settimana}</h2>`;
            if (eta >= 50 || tipologia === "over60") {
                output += `<p class="warning">* Scheda adattata per età superiore ai 50 anni</p>`;
            }

            for (let i = 0; i < giorni; i++) {
                output += generaGiornoAllenamento(i+1, gruppiPerSettimana[i], tipologia, obiettivo, eta);
            }
            return output;
        }

        function generaGiornoAllenamento(giorno, gruppiGiorno, tipologia, obiettivo, eta) {
            const nomeGruppo = gruppiGiorno.map(g => g.charAt(0).toUpperCase() + g.slice(1)).join(" / ");
            const numEsercizi = tipologia === "totalbody" ? 6 : 4 + Math.floor(Math.random() * 3);
            
            const eserciziGiorno = gruppiGiorno
                .flatMap(gr => esercizi[gr])
                .sort(() => 0.5 - Math.random())
                .slice(0, numEsercizi);

            let output = `<h4>Giorno ${giorno} - ${nomeGruppo}</h4><table>
                <tr><th>Esercizio</th><th>Serie</th><th>Ripetizioni</th><th>Intensità</th><th>Recupero</th><th>Suggerimento</th></tr>`;

            for (let es of eserciziGiorno) {
                const { serie, rip, intensita, recupero } = getParametriEsercizio(obiettivo, eta, tipologia);
                const tip = suggerimenti[es] || "";
                output += `<tr><td>${es}</td><td>${serie}</td><td>${rip}</td><td>${intensita}</td>
                    <td>${recupero}</td><td style='color:#666;font-size:0.9em;'>${tip}</td></tr>`;
            }
            output += "</table>";
            return output;
        }

        function getParametriEsercizio(obiettivo, eta, tipologia) {
            let rip, serie, intensita, recupero;
            
            if (obiettivo === "massa") {
                rip = "8-10";
                serie = "3-4";
            } else if (obiettivo === "definizione") {
                rip = "12-15";
                serie = "3";
            } else { // forza o default
                rip = "5-7";
                serie = "4-5";
            }

            if (eta >= 50 || tipologia === "over60") {
                intensita = obiettivo === "massa" ? "60-70%" : obiettivo === "definizione" ? "50-60%" : "70-80%";
                recupero = obiettivo === "massa" ? "90-120 sec" : obiettivo === "definizione" ? "60-90 sec" : "120-150 sec";
            } else {
                intensita = obiettivo === "massa" ? "75-85%" : obiettivo === "definizione" ? "60-70%" : "85-95%";
                recupero = obiettivo === "massa" ? "60-90 sec" : obiettivo === "definizione" ? "30-60 sec" : "90-120 sec";
            }

            return { serie, rip, intensita, recupero };
        }

        function scaricaPDF() {
            const element = document.getElementById("scheda");
            if (element.innerHTML.trim() === "") {
                alert("Genera prima una scheda di allenamento");
                return;
            }
            const opt = {
                margin: 10,
                filename: 'scheda_allenamento.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>